import{A as k}from"./AuthenticatedLayout-FdyOOO2H.js";import{r as c,k as w,m as C,p as V,o as d,c as M,w as S,a,b as i,d as m,g as j,F as B,e as I,n as N,f as O,t as h}from"./app--MouVYm_.js";import{_ as $}from"./FileIcon-IIKqUc5i.js";import{h as F}from"./http-helper-8mCmojbf.js";import{_ as f}from"./Checkbox-F23mrdle.js";import{_ as U}from"./DownloadFilesButton-KSrzM_Ad.js";import"./ApplicationLogo-AOHWVTlv.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./Modal-SMC_GH5Z.js";import"./TextInput-2R_EBo9f.js";import"./InputLabel-xpe3rCld.js";import"./SecondaryButton-1IJVD7tC.js";import"./PrimaryButton-EvV6Rm6d.js";import"./ResponsiveNavLink-qZyfNYok.js";const A={class:"flex items-center justify-end p-1 mb-3"},E={class:"flex-1 overflow-auto"},L={class:"min-w-full"},T={class:"bg-gray-100 border-b"},z={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left w-[30px] max-w-[30px] pr-0"},D=a("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Name ",-1),G=a("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Path ",-1),P=["onClick"],q={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 w-[30px] max-w-[30px] pr-0"},H={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 flex items-center"},J={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},K={key:0,class:"py-8 text-center text-sm text-gray-400"},ce={__name:"SharedByMe",props:{files:Object,folder:Object,ancestors:Object},setup(v){const r=v,l=c(!1),o=c({}),p=c(null),s=c({data:r.files.data,next:r.files.links.next}),_=w(()=>Object.entries(o.value).filter(e=>e[1]).map(e=>e[0]));function g(){console.log("load more"),console.log(s.value.next),s.value.next!==null&&F(s.value.next).then(e=>{s.value.data=[...s.value.data,...e.data],s.value.next=e.links.next})}function b(){s.value.data.forEach(e=>{o.value[e.id]=l.value})}function y(e){o.value[e.id]=!o.value[e.id],x(e)}function x(e){if(!o.value[e.id])l.value=!1;else{let n=!0;for(let t of s.value.data)if(!o.value[t.id]){n=!1;break}l.value=n}}return C(()=>{s.value={data:r.files.data,next:r.files.links.next}}),V(()=>{new IntersectionObserver(n=>n.forEach(t=>t.isIntersecting&&g()),{rootMargin:"-250px 0px 0px 0px"}).observe(p.value)}),(e,n)=>(d(),M(k,null,{default:S(()=>[a("nav",A,[a("div",null,[i(U,{all:l.value,ids:_.value,class:"mr-2","shared-by-me":!0},null,8,["all","ids"])])]),a("div",E,[a("table",L,[a("thead",T,[a("tr",null,[a("th",z,[i(f,{onChange:b,checked:l.value,"onUpdate:checked":n[0]||(n[0]=t=>l.value=t)},null,8,["checked"])]),D,G])]),a("tbody",null,[(d(!0),m(B,null,j(s.value.data,t=>(d(),m("tr",{key:t.id,onClick:u=>y(t),class:N(["border-b transition duration-300 ease-in-out hover:bg-blue-100 cursor-pointer",o.value[t.id]||l.value?"bg-blue-50":"bg-white"])},[a("td",q,[i(f,{onChange:u=>x(t),modelValue:o.value[t.id],"onUpdate:modelValue":u=>o.value[t.id]=u,checked:o.value[t.id]||l.value},null,8,["onChange","modelValue","onUpdate:modelValue","checked"])]),a("td",H,[i($,{file:t},null,8,["file"]),O(" "+h(t.name),1)]),a("td",J,h(t.path),1)],10,P))),128))])]),s.value.data.length?I("",!0):(d(),m("div",K," There is no data in this folder ")),a("div",{ref_key:"loadMoreIntersect",ref:p},null,512)])]),_:1}))}};export{ce as default};
