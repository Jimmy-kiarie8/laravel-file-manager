import{o as t,f as n,b as s,r as m,a as r,w as o,c as b,i as g,B as N,d as c,t as S,q as R,n as C,l as O,J as Q,v as W,p as Y,C as j,u as x,g as u,F as I,A as U,O as K}from"./app-8875be99.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import{a as G,_ as T}from"./SecondaryButton-e932bb63.js";import{a as M,b as q,_ as J}from"./TextInput-e0bae982.js";import{P as B}from"./PrimaryButton-473e5152.js";import{D as X}from"./DangerButton-01c103ff.js";const Z={},ee={class:"md:col-span-1 flex justify-between"},te={class:"px-4 sm:px-0"},oe={class:"text-lg font-medium text-gray-900"},se={class:"mt-1 text-sm text-gray-600"},ae={class:"px-4 sm:px-0"};function ne(l,i){return t(),n("div",ee,[s("div",te,[s("h3",oe,[m(l.$slots,"title")]),s("p",se,[m(l.$slots,"description")])]),s("div",ae,[m(l.$slots,"aside")])])}const re=z(Z,[["render",ne]]),le={class:"md:grid md:grid-cols-3 md:gap-6"},ce={class:"mt-5 md:mt-0 md:col-span-2"},ie={class:"px-4 py-5 sm:p-6 bg-white shadow sm:rounded-lg"},de={__name:"ActionSection",setup(l){return(i,_)=>(t(),n("div",le,[r(re,null,{title:o(()=>[m(i.$slots,"title")]),description:o(()=>[m(i.$slots,"description")]),_:3}),s("div",ce,[s("div",ie,[m(i.$slots,"content")])])]))}},ue={class:"px-6 py-4"},me={class:"text-lg font-medium text-gray-900"},fe={class:"mt-4 text-sm text-gray-600"},pe={class:"flex flex-row justify-end px-6 py-4 bg-gray-100 text-right"},_e={__name:"DialogModal",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0}},emits:["close"],setup(l,{emit:i}){const _=()=>{i("close")};return(e,a)=>(t(),b(G,{show:l.show,"max-width":l.maxWidth,closeable:l.closeable,onClose:_},{default:o(()=>[s("div",ue,[s("div",me,[m(e.$slots,"title")]),s("div",fe,[m(e.$slots,"content")])]),s("div",pe,[m(e.$slots,"footer")])]),_:3},8,["show","max-width","closeable"]))}},he={class:"mt-4"},k={__name:"ConfirmsPassword",props:{title:{type:String,default:"Confirm Password"},content:{type:String,default:"For your security, please confirm your password to continue."},button:{type:String,default:"Confirm"}},emits:["confirmed"],setup(l,{emit:i}){const _=g(!1),e=N({password:"",error:"",processing:!1}),a=g(null),h=()=>{axios.get(route("password.confirmation")).then(d=>{d.data.confirmed?i("confirmed"):(_.value=!0,setTimeout(()=>a.value.focus(),250))})},w=()=>{e.processing=!0,axios.post(route("password.confirm"),{password:e.password}).then(()=>{e.processing=!1,v(),O().then(()=>i("confirmed"))}).catch(d=>{e.processing=!1,e.error=d.response.data.errors.password[0],a.value.focus()})},v=()=>{_.value=!1,e.password="",e.error=""};return(d,f)=>(t(),n("span",null,[s("span",{onClick:h},[m(d.$slots,"default")]),r(_e,{show:_.value,onClose:v},{title:o(()=>[c(S(l.title),1)]),content:o(()=>[c(S(l.content)+" ",1),s("div",he,[r(M,{ref_key:"passwordInput",ref:a,modelValue:e.password,"onUpdate:modelValue":f[0]||(f[0]=y=>e.password=y),type:"password",class:"mt-1 block w-3/4",placeholder:"Password",autocomplete:"current-password",onKeyup:R(w,["enter"])},null,8,["modelValue","onKeyup"]),r(q,{message:e.error,class:"mt-2"},null,8,["message"])])]),footer:o(()=>[r(T,{onClick:v},{default:o(()=>[c(" Cancel ")]),_:1}),r(B,{class:C(["ml-3",{"opacity-25":e.processing}]),disabled:e.processing,onClick:w},{default:o(()=>[c(S(l.button),1)]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}},ve={key:0,class:"text-lg font-medium text-gray-900"},ye={key:1,class:"text-lg font-medium text-gray-900"},ge={key:2,class:"text-lg font-medium text-gray-900"},we=s("div",{class:"mt-3 max-w-xl text-sm text-gray-600"},[s("p",null," When two factor authentication is enabled, you will be prompted for a secure, random token during authentication. You may retrieve this token from your phone's Google Authenticator application. ")],-1),xe={key:3},be={key:0},ke={class:"mt-4 max-w-xl text-sm text-gray-600"},Ce={key:0,class:"font-semibold"},$e={key:1},Se=["innerHTML"],Te={key:0,class:"mt-4 max-w-xl text-sm text-gray-600"},Fe={class:"font-semibold"},Be=["innerHTML"],Ae={key:1,class:"mt-4"},Pe={key:1},Ve=s("div",{class:"mt-4 max-w-xl text-sm text-gray-600"},[s("p",{class:"font-semibold"}," Store these recovery codes in a secure password manager. They can be used to recover access to your account if your two factor authentication device is lost. ")],-1),Ke={class:"grid gap-1 max-w-xl mt-4 px-4 py-4 font-mono text-sm bg-gray-100 rounded-lg"},Re={class:"mt-5"},Me={key:0},qe={key:1},Qe={__name:"TwoFactorAuthenticationForm",props:{requiresConfirmation:Boolean},setup(l){const i=l,_=Q(),e=g(!1),a=g(!1),h=g(!1),w=g(null),v=g(null),d=g([]),f=W({code:""}),y=Y(()=>{var p;return!e.value&&((p=_.props.auth.user)==null?void 0:p.two_factor_enabled)});j(y,()=>{y.value||(f.reset(),f.clearErrors())});const D=()=>{e.value=!0,K.post(route("two-factor.enable"),{},{preserveScroll:!0,onSuccess:()=>Promise.all([L(),E(),F()]),onFinish:()=>{e.value=!1,a.value=i.requiresConfirmation}})},L=()=>axios.get(route("two-factor.qr-code")).then(p=>{w.value=p.data.svg}),E=()=>axios.get(route("two-factor.secret-key")).then(p=>{v.value=p.data.secretKey}),F=()=>axios.get(route("two-factor.recovery-codes")).then(p=>{d.value=p.data}),A=()=>{f.post(route("two-factor.confirm"),{errorBag:"confirmTwoFactorAuthentication",preserveScroll:!0,preserveState:!0,onSuccess:()=>{a.value=!1,w.value=null,v.value=null}})},H=()=>{axios.post(route("two-factor.recovery-codes")).then(()=>F())},P=()=>{h.value=!0,K.delete(route("two-factor.disable"),{preserveScroll:!0,onSuccess:()=>{h.value=!1,a.value=!1}})};return(p,V)=>(t(),b(de,null,{title:o(()=>[c(" Two Factor Authentication ")]),description:o(()=>[c(" Add additional security to your account using two factor authentication. ")]),content:o(()=>[x(y)&&!a.value?(t(),n("h3",ve," You have enabled two factor authentication. ")):x(y)&&a.value?(t(),n("h3",ye," Finish enabling two factor authentication. ")):(t(),n("h3",ge," You have not enabled two factor authentication. ")),we,x(y)?(t(),n("div",xe,[w.value?(t(),n("div",be,[s("div",ke,[a.value?(t(),n("p",Ce," To finish enabling two factor authentication, scan the following QR code using your phone's authenticator application or enter the setup key and provide the generated OTP code. ")):(t(),n("p",$e," Two factor authentication is now enabled. Scan the following QR code using your phone's authenticator application or enter the setup key. "))]),s("div",{class:"mt-4 p-2 inline-block bg-white",innerHTML:w.value},null,8,Se),v.value?(t(),n("div",Te,[s("p",Fe,[c(" Setup Key: "),s("span",{innerHTML:v.value},null,8,Be)])])):u("",!0),a.value?(t(),n("div",Ae,[r(J,{for:"code",value:"Code"}),r(M,{id:"code",modelValue:x(f).code,"onUpdate:modelValue":V[0]||(V[0]=$=>x(f).code=$),type:"text",name:"code",class:"block mt-1 w-1/2",inputmode:"numeric",autofocus:"",autocomplete:"one-time-code",onKeyup:R(A,["enter"])},null,8,["modelValue","onKeyup"]),r(q,{message:x(f).errors.code,class:"mt-2"},null,8,["message"])])):u("",!0)])):u("",!0),d.value.length>0&&!a.value?(t(),n("div",Pe,[Ve,s("div",Ke,[(t(!0),n(I,null,U(d.value,$=>(t(),n("div",{key:$},S($),1))),128))])])):u("",!0)])):u("",!0),s("div",Re,[x(y)?(t(),n("div",qe,[r(k,{onConfirmed:A},{default:o(()=>[a.value?(t(),b(B,{key:0,type:"button",class:C(["mr-3",{"opacity-25":e.value}]),disabled:e.value},{default:o(()=>[c(" Confirm ")]),_:1},8,["class","disabled"])):u("",!0)]),_:1}),r(k,{onConfirmed:H},{default:o(()=>[d.value.length>0&&!a.value?(t(),b(T,{key:0,class:"mr-3"},{default:o(()=>[c(" Regenerate Recovery Codes ")]),_:1})):u("",!0)]),_:1}),r(k,{onConfirmed:F},{default:o(()=>[d.value.length===0&&!a.value?(t(),b(T,{key:0,class:"mr-3"},{default:o(()=>[c(" Show Recovery Codes ")]),_:1})):u("",!0)]),_:1}),r(k,{onConfirmed:P},{default:o(()=>[a.value?(t(),b(T,{key:0,class:C({"opacity-25":h.value}),disabled:h.value},{default:o(()=>[c(" Cancel ")]),_:1},8,["class","disabled"])):u("",!0)]),_:1}),r(k,{onConfirmed:P},{default:o(()=>[a.value?u("",!0):(t(),b(X,{key:0,class:C({"opacity-25":h.value}),disabled:h.value},{default:o(()=>[c(" Disable ")]),_:1},8,["class","disabled"]))]),_:1})])):(t(),n("div",Me,[r(k,{onConfirmed:D},{default:o(()=>[r(B,{type:"button",class:C({"opacity-25":e.value}),disabled:e.value},{default:o(()=>[c(" Enable ")]),_:1},8,["class","disabled"])]),_:1})]))])]),_:1}))}};export{Qe as default};
