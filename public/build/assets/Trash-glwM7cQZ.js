import{s as S,a as I,A as F}from"./AuthenticatedLayout-xoiJIIfz.js";import{bH as B,T as V,r as u,o as m,d as v,a as t,f as b,b as c,F as w,k as $,m as M,p as j,c as D,w as N,g as L,e as O,n as q,t as y}from"./app-KBs2HYMl.js";import{_ as E}from"./FileIcon-xrV1sYmK.js";import{h as T}from"./http-helper-lComIRVr.js";import{_ as C}from"./Checkbox-VuMnZ8tO.js";import{_ as A}from"./ConfirmationDialog-9uQgjzda.js";import"./ApplicationLogo-5iS_oVi6.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./Modal-Ii29NGL0.js";import"./TextInput-PLeUluEn.js";import"./InputLabel-TjsWWMZ4.js";import"./SecondaryButton-yk9HK6yC.js";import"./PrimaryButton-m2oUCvTh.js";import"./ResponsiveNavLink-E7FXgT5b.js";import"./DangerButton-QEFJXVhG.js";const U=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})],-1),z={__name:"RestoreFilesButton",props:{allSelected:{type:Boolean,required:!1,default:!1},selectedIds:{type:Array,required:!1}},emits:["restore"],setup(f,{emit:n}){B();const l=V({all:null,ids:[],parent_id:null}),e=u(!1),r=f,a=n;function d(){if(!r.allSelected&&!r.selectedIds.length){S("Please select at least one file to restore");return}e.value=!0}function p(){e.value=!1}function h(){r.allSelected?l.all=!0:l.ids=r.selectedIds,l.post(route("file.restore"),{onSuccess:()=>{e.value=!1,a("restore"),I("Selected files have been restored")}})}return(g,x)=>(m(),v(w,null,[t("button",{onClick:d,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white"},[U,b(" Restore ")]),c(A,{show:e.value,message:"Are you sure you want to restore selected files?",onCancel:p,onConfirm:h},null,8,["show"])],64))}},P=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 mr-2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),R={__name:"DeleteForeverButton",props:{allSelected:{type:Boolean,required:!1,default:!1},selectedIds:{type:Array,required:!1}},emits:["delete"],setup(f,{emit:n}){B();const l=V({all:null,ids:[],parent_id:null}),e=u(!1),r=f,a=n;function d(){if(!r.allSelected&&!r.selectedIds.length){S("Please select at least one file to delete");return}e.value=!0}function p(){e.value=!1}function h(){r.allSelected?(l.all=!0,l.ids=[]):l.ids=r.selectedIds,l.delete(route("file.deleteForever"),{onSuccess:()=>{e.value=!1,a("delete"),I("Selected files have been deleted forever")}})}return(g,x)=>(m(),v(w,null,[t("button",{onClick:d,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white mr-3"},[P,b(" Delete Forever ")]),c(A,{show:e.value,message:"Are you sure you want to delete selected files?",onCancel:p,onConfirm:h},null,8,["show"])],64))}},H={class:"flex items-center justify-end p-1 mb-3"},G={class:"flex-1 overflow-auto"},Q={class:"min-w-full"},J={class:"bg-gray-100 border-b"},K={class:"text-sm font-medium text-gray-900 px-6 py-4 text-left w-[30px] max-w-[30px] pr-0"},W=t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Name ",-1),X=t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Path ",-1),Y=["onClick"],Z={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 w-[30px] max-w-[30px] pr-0"},ee={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 flex items-center"},te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},le={key:0,class:"py-8 text-center text-sm text-gray-400"},ge={__name:"Trash",props:{files:Object,folder:Object,ancestors:Object},setup(f){const n=f,l=u(!1),e=u({}),r=u(null),a=u({data:n.files.data,next:n.files.links.next}),d=$(()=>Object.entries(e.value).filter(o=>o[1]).map(o=>o[0]));function p(){console.log("load more"),console.log(a.value.next),a.value.next!==null&&T(a.value.next).then(o=>{a.value.data=[...a.value.data,...o.data],a.value.next=o.links.next})}function h(){a.value.data.forEach(o=>{e.value[o.id]=l.value})}function g(o){e.value[o.id]=!e.value[o.id],x(o)}function x(o){if(!e.value[o.id])l.value=!1;else{let i=!0;for(let s of a.value.data)if(!e.value[s.id]){i=!1;break}l.value=i}}function k(){l.value=!1,e.value={}}return M(()=>{a.value={data:n.files.data,next:n.files.links.next}}),j(()=>{new IntersectionObserver(i=>i.forEach(s=>s.isIntersecting&&p()),{rootMargin:"-250px 0px 0px 0px"}).observe(r.value)}),(o,i)=>(m(),D(F,null,{default:N(()=>[t("nav",H,[t("div",null,[c(R,{"all-selected":l.value,"selected-ids":d.value,onDelete:k},null,8,["all-selected","selected-ids"]),c(z,{"all-selected":l.value,"selected-ids":d.value,onRestore:k},null,8,["all-selected","selected-ids"])])]),t("div",G,[t("table",Q,[t("thead",J,[t("tr",null,[t("th",K,[c(C,{onChange:h,checked:l.value,"onUpdate:checked":i[0]||(i[0]=s=>l.value=s)},null,8,["checked"])]),W,X])]),t("tbody",null,[(m(!0),v(w,null,L(a.value.data,s=>(m(),v("tr",{key:s.id,onClick:_=>g(s),class:q(["border-b transition duration-300 ease-in-out hover:bg-blue-100 cursor-pointer",e.value[s.id]||l.value?"bg-blue-50":"bg-white"])},[t("td",Z,[c(C,{onChange:_=>x(s),modelValue:e.value[s.id],"onUpdate:modelValue":_=>e.value[s.id]=_,checked:e.value[s.id]||l.value},null,8,["onChange","modelValue","onUpdate:modelValue","checked"])]),t("td",ee,[c(E,{file:s},null,8,["file"]),b(" "+y(s.name),1)]),t("td",te,y(s.path),1)],10,Y))),128))])]),a.value.data.length?O("",!0):(m(),v("div",le," There is no data in this folder ")),t("div",{ref_key:"loadMoreIntersect",ref:r},null,512)])]),_:1}))}};export{ge as default};
